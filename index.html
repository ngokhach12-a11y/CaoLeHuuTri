<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>HenHo - Trang Ch·ªß</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    
    <script>
        const userName = localStorage.getItem('userName');
        if (!userName) { window.location.href = 'setup.html'; }
    </script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* CSS TH·∫∫ B√ÄI (C·∫≠p nh·∫≠t hi·ªÉn th·ªã th√¥ng tin chi ti·∫øt) */
        .card-stack {
            width: 100%; max-width: 400px; height: 75vh;
            position: relative; margin: 10px auto;
        }
        .card {
            width: 100%; height: 100%; border-radius: 20px;
            background-size: cover; background-position: center;
            position: absolute; top: 0; left: 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex; flex-direction: column; justify-content: flex-end;
            transition: transform 0.5s ease, opacity 0.5s ease;
            overflow: hidden; background-color: #eee;
        }
        /* L·ªõp ph·ªß ƒëen m·ªù ƒë·ªÉ ch·ªØ hi·ªán r√µ h∆°n */
        .card-gradient {
            background: linear-gradient(to top, rgba(0,0,0,0.95) 10%, rgba(0,0,0,0.6) 50%, transparent 100%);
            padding: 20px; color: white; width: 100%;
        }
        
        /* T√™n v√† Tu·ªïi */
        .card-header { display: flex; align-items: baseline; gap: 10px; margin-bottom: 5px; }
        .card-name { font-size: 26px; font-weight: 800; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .card-age { font-size: 22px; font-weight: normal; }
        
        /* Th√¥ng tin ph·ª• (Location, Job, Goal) */
        .card-info-row { font-size: 13px; margin-bottom: 3px; display: flex; align-items: center; gap: 6px; opacity: 0.9; }
        .card-bio { font-size: 15px; margin: 10px 0; line-height: 1.4; color: #fff; font-style: italic; }
        
        /* Tags s·ªü th√≠ch */
        .card-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 5px; }
        .c-tag { 
            background: rgba(255,255,255,0.25); padding: 4px 10px; 
            border-radius: 12px; font-size: 11px; backdrop-filter: blur(4px); 
            border: 1px solid rgba(255,255,255,0.4); font-weight: 600;
        }

        /* Animation */
        .swipe-left { transform: translateX(-150%) rotate(-30deg) !important; opacity: 0; }
        .swipe-right { transform: translateX(150%) rotate(30deg) !important; opacity: 0; }
        .fade-in { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="page-title">Kh√°m Ph√° üî•</div>
            <div style="font-size: 12px; color: #888;">ƒêang t√¨m: <span id="filterLabel" style="font-weight:bold; color:var(--primary);">...</span></div>
        </div>

        <div class="main-content">
            <div class="card-stack" id="cardContainer">
                <div style="display: flex; height: 100%; align-items: center; justify-content: center; color: #ccc;">ƒêang t·∫£i h·ªì s∆°...</div>
            </div>

            <div class="action-buttons">
                <button class="btn-circle btn-nope" onclick="handleSwipe('nope')"><i class="fas fa-times"></i></button>
                <button class="btn-circle btn-like" onclick="handleSwipe('like')"><i class="fas fa-heart"></i></button>
            </div>
        </div>

        <nav class="bottom-nav">
            <a href="index.html" class="nav-item active"><i class="fas fa-fire"></i></a>
            <a href="random.html" class="nav-item"><i class="fas fa-bolt"></i></a>
            <a href="community.html" class="nav-item"><i class="fas fa-globe-asia"></i></a>
            <a href="chat.html" class="nav-item"><i class="fas fa-comment"></i></a>
            <a href="profile.html" class="nav-item"><i class="fas fa-user"></i></a>
        </nav>
    </div>

    <script>
        // 1. D·ªÆ LI·ªÜU 12 NG∆Ø·ªúI (B·∫†N T·ª∞ TH√äM ·∫¢NH V√ÄO TH∆Ø M·ª§C IMAGES NH√â)
        /* QUY ∆Ø·ªöC ƒê·∫∂T T√äN ·∫¢NH:
           - N·ªØ: user1.jpg -> user6.jpg
           - Nam: user7.jpg -> user12.jpg
        */
        const allProfiles = [
            // --- DANH S√ÅCH N·ªÆ (6 NG∆Ø·ªúI) ---
            { 
                gender: 'female', name: "C√°o Nh·ªè ü¶ä", age: 20, img: "images/user1.jpg", 
                location: "Q1, TP.HCM", goal: "‚òï Cafe & Tr√≤ chuy·ªán", job: "Sinh vi√™n RMIT",
                bio: "Em kh√¥ng th√≠ch ch·ª•p ·∫£nh, em ch·ªâ th√≠ch anh ch·ª•p em th√¥i.", 
                tags: ["Ngh·ªá thu·∫≠t", "M√®o", "Tr√† s·ªØa"] 
            },
            { 
                gender: 'female', name: "B√© G·∫°o", age: 22, img: "images/user2.jpg", 
                location: "C·∫ßu Gi·∫•y, H√† N·ªôi", goal: "üíç M·ªëi quan h·ªá nghi√™m t√∫c", job: "Marketing",
                bio: "Nghi√™m t√∫c th√¨ inbox, trap boy xin tha em ·∫°.", 
                tags: ["N·∫•u ƒÉn", "Du l·ªãch", "S√°ch"] 
            },
            { 
                gender: 'female', name: "M√¢y ‚òÅÔ∏è", age: 19, img: "images/user3.jpg", 
                location: "ƒê√† N·∫µng", goal: "üéÆ T√¨m b·∫°n Duo Rank", job: "Freelancer",
                bio: "Tuy·ªÉn ng∆∞·ªùi y√™u bi·∫øt ƒë√°nh Li√™n Qu√¢n, em support cho.", 
                tags: ["Game", "Anime", "Cosplay"] 
            },
            { 
                gender: 'female', name: "Chanh S·∫£", age: 24, img: "images/user4.jpg", 
                location: "Q7, TP.HCM", goal: "ü•Ç FWB (T√πy duy√™n)", job: "Ng∆∞·ªùi m·∫´u ·∫£nh",
                bio: "Th√≠ch nh·ªØng n∆°i sang tr·ªçng v√† ng∆∞·ªùi ƒë√†n √¥ng tinh t·∫ø.", 
                tags: ["Gym", "Shopping", "Bar"] 
            },
            { 
                gender: 'female', name: "Thanh Xu√¢n", age: 21, img: "images/user5.jpg", 
                location: "Ho√†n Ki·∫øm, HN", goal: "üì∏ T√¨m m·∫´u ·∫£nh", job: "Nhi·∫øp ·∫£nh gia",
                bio: "Y√™u m√†u h·ªìng, gh√©t s·ª± gi·∫£ d·ªëi. Th√≠ch ch·ª•p film.", 
                tags: ["Vintage", "Film", "Music"] 
            },
            { 
                gender: 'female', name: "√öt C∆∞ng", age: 23, img: "images/user6.jpg", 
                location: "B√¨nh Th·∫°nh, TP.HCM", goal: "üë´ H·∫πn h√≤", job: "K·∫ø to√°n",
                bio: "Em ch·ªâ c·∫ßn m·ªôt ng∆∞·ªùi bi·∫øt l·∫Øng nghe v√† chi·ªÅu chu·ªông.", 
                tags: ["ƒÇn u·ªëng", "Phim H√†n", "Ng·ªß"] 
            },

            // --- DANH S√ÅCH NAM (6 NG∆Ø·ªúI) ---
            { 
                gender: 'male', name: "Shark H∆∞ng", age: 25, img: "images/user7.jpg", 
                location: "Q3, TP.HCM", goal: "üíç T√¨m v·ª£ t∆∞∆°ng lai", job: "CEO Startup",
                bio: "C√¥ng vi·ªác ·ªïn ƒë·ªãnh, nh√† xe ƒë·∫ßy ƒë·ªß, ch·ªâ thi·∫øu em.", 
                tags: ["Kinh doanh", "Golf", "Xe h∆°i"] 
            },
            { 
                gender: 'male', name: "ƒê·∫°t 09", age: 24, img: "images/user8.jpg", 
                location: "Thanh Xu√¢n, HN", goal: "‚öΩ T√¨m b·∫°n th·ªÉ thao", job: "PT Gym",
                bio: "Th√≠ch v·∫≠n ƒë·ªông, body 6 m√∫i. Ai mu·ªën gi·∫£m c√¢n inbox anh.", 
                tags: ["Gym", "B√≥ng ƒë√°", "Healthy"] 
            },
            { 
                gender: 'male', name: "Boy L·∫°nh L√πng", age: 28, img: "images/user9.jpg", 
                location: "H·∫£i Ch√¢u, ƒêN", goal: "‚òï Cafe l√†m vi·ªác", job: "IT Developer",
                bio: "√çt n√≥i, l√†m nhi·ªÅu. Ch·ªâ c·∫ßn m·ªôt ng∆∞·ªùi hi·ªÉu chuy·ªán.", 
                tags: ["Code", "C√¥ng ngh·ªá", "Camping"] 
            },
            { 
                gender: 'male', name: "Ho√†ng Prince", age: 22, img: "images/user10.jpg", 
                location: "Th·ªß ƒê·ª©c, TP.HCM", goal: "üé∏ T√¨m b·∫°n h√°t ƒë√¥i", job: "Nh·∫°c sƒ©",
                bio: "Bi·∫øt ƒë√†n Guitar v√† h√°t. Th√≠ch l√£ng m·∫°n v√† nh·ªØng b·∫£n t√¨nh ca.", 
                tags: ["√Çm nh·∫°c", "Acoustic", "Chill"] 
            },
            { 
                gender: 'male', name: "Mr. Vui V·∫ª", age: 23, img: "images/user11.jpg", 
                location: "T√¢y H·ªì, HN", goal: "üçª Nh·∫≠u nh·∫πt", job: "Sale BƒêS",
                bio: "S·ªëng l√† ph·∫£i vui. Th√≠ch ƒëi ph∆∞·ª£t v√† tr·∫£i nghi·ªám.", 
                tags: ["Ph∆∞·ª£t", "Nh·∫≠u", "H√†i h∆∞·ªõc"] 
            },
            { 
                gender: 'male', name: "Th·∫ßy Gi√°o M∆∞a", age: 26, img: "images/user12.jpg", 
                location: "G√≤ V·∫•p, TP.HCM", goal: "üìö T√¨m b·∫°n ƒë·ªçc s√°ch", job: "Gi√°o vi√™n",
                bio: "Th√≠ch kh√¥ng gian y√™n tƒ©nh, cafe s√°ch v√† m√®o.", 
                tags: ["S√°ch", "M√®o", "L·ªãch s·ª≠"] 
            }
        ];

        // 2. L·ªåC DANH S√ÅCH (Nam/N·ªØ)
        const targetGender = localStorage.getItem('targetGender');
        let filteredProfiles = [];

        if (targetGender && targetGender !== 'all') {
            filteredProfiles = allProfiles.filter(p => p.gender === targetGender);
            document.getElementById('filterLabel').innerText = targetGender === 'male' ? "Nam" : "N·ªØ";
        } else {
            filteredProfiles = [...allProfiles];
            document.getElementById('filterLabel').innerText = "T·∫•t c·∫£";
        }

        // X√°o tr·ªôn ng·∫´u nhi√™n
        filteredProfiles.sort(() => Math.random() - 0.5);

        let currentIndex = 0;

        // 3. RENDER TH·∫∫ B√ÄI
        function renderCurrentCard() {
            const container = document.getElementById('cardContainer');
            container.innerHTML = '';

            if (filteredProfiles.length === 0) {
                container.innerHTML = `<div style="text-align:center; color:#888; padding-top:100px;">Kh√¥ng t√¨m th·∫•y ai ph√π h·ª£p!</div>`;
                return;
            }

            const p = filteredProfiles[currentIndex];

            // T·∫°o th·∫ª HTML
            const card = document.createElement('div');
            card.className = 'card fade-in';
            card.id = 'currentCard';
            card.style.backgroundImage = `url('${p.img}')`; // ·∫¢nh t·ª´ th∆∞ m·ª•c images

            // T·∫°o tags
            let tagsHtml = p.tags.map(tag => `<span class="c-tag">${tag}</span>`).join('');

            card.innerHTML = `
                <div class="card-gradient">
                    <div class="card-header">
                        <div class="card-name">${p.name}</div>
                        <div class="card-age">${p.age}</div>
                    </div>
                    
                    <div class="card-info-row"><i class="fas fa-map-marker-alt" style="color:#ff6b81; width:15px;"></i> ${p.location}</div>
                    <div class="card-info-row"><i class="fas fa-briefcase" style="color:#2ed573; width:15px;"></i> ${p.job}</div>
                    <div class="card-info-row"><i class="fas fa-search-heart" style="color:#ffa502; width:15px;"></i> ${p.goal}</div>
                    
                    <div class="card-bio">"${p.bio}"</div>
                    <div class="card-tags">${tagsHtml}</div>
                </div>
            `;

            container.appendChild(card);
        }

        // 4. X·ª¨ L√ù QU·∫∏T (LOOP)
        function handleSwipe(action) {
            const card = document.getElementById('currentCard');
            if(!card) return;

            if (action === 'nope') card.classList.add('swipe-left');
            else card.classList.add('swipe-right');

            setTimeout(() => {
                currentIndex++;
                // V√íNG L·∫∂P: N·∫øu h·∫øt th√¨ quay v·ªÅ 0
                if (currentIndex >= filteredProfiles.length) {
                    currentIndex = 0;
                    filteredProfiles.sort(() => Math.random() - 0.5); // X√°o tr·ªôn l·∫°i cho ƒë·ª° ch√°n
                }
                renderCurrentCard();
            }, 300);
        }

        renderCurrentCard();
    </script>
</body>
</html>
